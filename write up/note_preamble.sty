\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{note_preamble}[2025/10/20]


\RequirePackage{enumitem}
\RequirePackage{listings}
\RequirePackage{xcolor}
\RequirePackage[T1]{fontenc}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage[skins, most]{tcolorbox}


\RequirePackage{fontspec}
\setmonofont{JetBrains Mono NL}


%%%%%%%%% QUIVER for cd diagrams from quiver.app %%%%%%%%%
% `tikz-cd` is necessary to draw commutative diagrams.
\RequirePackage{tikz-cd}
% `amssymb` is necessary for `\lrcorner` and `\ulcorner`.
\RequirePackage{amssymb}
% `calc` is necessary to draw curved arrows.
\usetikzlibrary{calc}
% `pathmorphing` is necessary to draw squiggly arrows.
\usetikzlibrary{decorations.pathmorphing}
% `spath3` is necessary to draw shortened edges.
\usetikzlibrary{spath3}

% A TikZ style for curved arrows of a fixed height, due to Andr√©C.
\tikzset{curve/.style={settings={#1},to path={(\tikztostart)
    .. controls ($(\tikztostart)!\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    and ($(\tikztostart)!1-\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    .. (\tikztotarget)\tikztonodes}},
    settings/.code={\tikzset{quiver/.cd,#1}
        \def\pv##1{\pgfkeysvalueof{/tikz/quiver/##1}}},
    quiver/.cd,pos/.initial=0.35,height/.initial=0}

% A TikZ style for shortening paths without the poor behaviour of `shorten <' and `shorten >'.
\tikzset{between/.style n args={2}{/tikz/execute at end to={
    \tikzset{spath/split at keep middle={current}{#1}{#2}}
}}}

% TikZ arrowhead/tail styles.
\tikzset{tail reversed/.code={\pgfsetarrowsstart{tikzcd to}}}
\tikzset{2tail/.code={\pgfsetarrowsstart{Implies[reversed]}}}
\tikzset{2tail reversed/.code={\pgfsetarrowsstart{Implies}}}
% TikZ arrow styles.
\tikzset{no body/.style={/tikz/dash pattern=on 0 off 1mm}}


%%%%%%%%% COLOR DEFINITIONS %%%%%%%%

\definecolor{yorhabg}{HTML}{131314}		%background
\definecolor{yorhafg}{HTML}{C9C7CD}		%foreground
\definecolor{yorhagrid}{HTML}{B5AF9C}
\definecolor{mred}{HTML}{D67069}		%box color red
\definecolor{mblue}{HTML}{6887A1}		%box color blue
\definecolor{catpuccin_base}{rgb}{0.14, 0.15, 0.23}
\definecolor{catpuccin_text}{rgb}{0.79, 0.83, 0.96}
\definecolor{catpuccin_subtext1}{rgb}{0.72, 0.75, 0.88}
\definecolor{catpuccin_overlay0}{rgb}{0.43, 0.45, 0.55}
\definecolor{catpuccin_mantle}{rgb}{0.11, 0.12, 0.19} 
\definecolor{catpuccin_green}{rgb}{0.65, 0.85, 0.58}
\definecolor{catpuccin_mauve}{rgb}{0.77, 0.63, 0.96}
\definecolor{catpuccin_sapphire}{rgb}{0.49, 0.77, 0.89}
\definecolor{catpuccin_sky}{rgb}{0.57, 0.84, 0.89}
\definecolor{catpuccin_peach}{rgb}{0.96, 0.66, 0.5}
\definecolor{catpuccin_crust}{rgb}{0.09, 0.1, 0.15}
\definecolor{catpuccin_red}{rgb}{0.93, 0.53, 0.59}
\definecolor{catpuccin_blue}{rgb}{0.54, 0.68, 0.96}
%New code environment colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% set links once colors are defined
\RequirePackage[colorlinks=true, linkcolor = catpuccin_peach]{hyperref}


% set page and text color
\pagecolor{catpuccin_base}
\color{catpuccin_text}



%%%%%%%%% Code listing style named "python-style1" %%%%%%%%%%
\lstdefinestyle{python-style1}{
  backgroundcolor=\color{catpuccin_crust}, commentstyle=\color{catpuccin_sapphire},
  keywordstyle=\color{catpuccin_mauve},
  numberstyle=\tiny\color{catpuccin_overlay0},
  stringstyle=\color{catpuccin_green},
  basicstyle=\ttfamily\footnotesize\color{catpuccin_subtext1},
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}


%%%%%%%%%%%%%%%%% Margins %%%%%%%%%%%%%%%
\topmargin=0in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in


%%%%%%%%%% COLOR BOXES %%%%%%%%%%%%%
\AtBeginEnvironment{tcolorbox}{\small}

\newtcolorbox{bluebox}[1]{
    enhanced, 
    colback=catpuccin_base,
    colframe=catpuccin_blue,
    coltext=catpuccin_text,
    coltitle=catpuccin_base,
    attach boxed title to top left={yshift*=-\tcboxedtitleheight}, 
    title={#1},
    boxed title size=title,
    boxed title style={%
        rounded corners=northeast, 
        rounded corners=northwest, 
        colback=tcbcolframe, 
        boxrule=0pt,
    },
    underlay boxed title={%
        \path[fill=tcbcolframe] (title.south west)--(title.south east) 
            to[out=0, in=180] ([xshift=5mm]title.east)--
            (title.center-|frame.east)
            [rounded corners=5pt] |- 
            (frame.north) -| cycle; 
    },
}

\newtcolorbox{redbox}[1]{
    enhanced, 
    colback=catpuccin_base,
    colframe=catpuccin_red,
    coltext=catpuccin_text,
    coltitle=catpuccin_base,
    attach boxed title to top left={yshift*=-\tcboxedtitleheight}, 
    title={#1},
    boxed title size=title,
    boxed title style={%
        rounded corners=northeast, 
        rounded corners=northwest, 
        colback=tcbcolframe, 
        boxrule=0pt,
    },
    underlay boxed title={%
        \path[fill=tcbcolframe] (title.south west)--(title.south east) 
            to[out=0, in=180] ([xshift=5mm]title.east)--
            (title.center-|frame.east)
            [rounded corners=5pt] |- 
            (frame.north) -| cycle; 
    },
}

